extends layout
block content
	script.
		$(document).ready(function() {
			$('.onoffswitch-checkbox').on('click touch', function() {
				var check = $(this).attr('checked');
				console.log('checked? '+ check);

				if(check === true) {

					$.ajax ({
						type : 'POST',
						url : '/settings?field='+ this.id,
						data : {
							checked : true
						}
					});
				} 
				if(check === undefined) {
				console.log('undefined reached');
					$.ajax ({
						type : 'POST',
						url : '/settings?field='+ this.id,
						data : {
							checked : false
						}
					});
				}
			});

			$('#chooseColourScheme').on('click touch', function() {
				var colour = $('#chooseColourScheme').val();
				console.log(colour);
				$.ajax ({
					type: 'POST',
					url: '/settings?field=colour',
					data: {
						colour : colour
					}
				});
			});
		});
	.container
		include includes/nav.jade
		.settingsWrap
			h1 Settings
			.settingsA
				.settingsAccount
					h2 Account
					a(href='/settings/change?field=username')
						.setting
							.settingTitle
								p username
							.settingInput
								p #{user.username}	
					a(href='/settings/change?field=email')
						.setting
							.settingTitle
								p email
							.settingInput
								p #{user.email}
					if (user.provider === 'local')
						a(href='/settings/change?field=password')
							.setting
								.settingTitle
									p password
								.settingInput
									p ***********
					a(href='/delete')
						.setting
							.settingTitle
								p account
							.settingInput
								p delete account
			.settingsC
				.settingsChat
					h2 Video Chat
					.setting
						.settingTitle
							p microphone
						.onoffswitch
							if (user.defaultMic === true)
								input.onoffswitch-checkbox#defaultMic(type='checkbox', name='defaultMic', checked=true)
							else
								input.onoffswitch-checkbox#defaultMic(type='checkbox', name='defaultMic', checked=false)
							label.onoffswitch-label(for='defaultMic')
								span.onoffswitch-inner
								span.onoffswitch-switch
					.setting
						.settingTitle
							p webcam
						.onoffswitch
							if (user.defaultVideo === true)
								input.onoffswitch-checkbox#defaultVideo(type='checkbox', name='defaultVideo', checked=true)
							else
								input.onoffswitch-checkbox#defaultVideo(type='checkbox', name='defaultVideo', checked=false)
							label.onoffswitch-label(for='defaultVideo')
								span.onoffswitch-inner
								span.onoffswitch-switch
			.settingsP
				.settingsPersonalize
					h2 Personalize
					.setting
						.settingTitle
							p colour scheme
						.selectChoice
							select#chooseColourScheme(name='colourScheme')
								option(value='red', default) Red
								option(value='blue') Blue
								option(value='mint') Mint
								option(value='yellow') Yellow